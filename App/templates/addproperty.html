{% extends "layout.html" %}
{% block title %}Add Property{% endblock %}
{% block page %}Add Property{% endblock %}

{% block content %}

<div class="container-fluid" style="padding: 0 30px;">
  <div class="row">
    <div class="col s12">
      <div class="card" style="margin-top: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08);">
        <div class="card-content">
          <div class="row" style="margin-bottom: 0;">
            <div class="col s12 m8">
              <span class="card-title blue-grey-text text-darken-1" style="font-weight: bold; font-size: 24px;">
                <i class="material-icons left">add_home</i>Add New Property
              </span>
            </div>
            <div class="col s12 m4 right-align" style="padding-top: 6px;">
              <div class="chip blue-grey lighten-5" style="border: none;">
                <i class="material-icons left tiny">info</i>
                All fields marked with * are required
              </div>
            </div>
          </div>
          
          <form action="/addproperty" method="POST" enctype="multipart/form-data">
            <div class="row">
              <!-- Left Column -->
              <div class="col s12 m6">
                <!-- Basic Information Section -->
                <div class="section">
                  <h5 class="blue-grey-text text-darken-1" style="font-size: 18px; margin: 20px 0 10px 0; display: flex; align-items: center;">
                    <i class="material-icons" style="margin-right: 8px;">info</i>Basic Information
                  </h5>
                  <div class="divider" style="margin-bottom: 15px;"></div>
                  
                  <div class="row" style="margin-bottom: 0;">
                    <div class="input-field col s12">
                      <i class="material-icons prefix">title</i>
                      <input type="text" id="propertyTitle" name="propertyTitle" class="validate" required maxlength="20">
                      <label for="propertyTitle">Property Title *</label>
                      <span class="helper-text">Maximum 20 characters</span>
                    </div>
                    
                    <div class="input-field col s12 m6">
                      <i class="material-icons prefix">attach_money</i>
                      <input type="number" id="price" name="price" class="validate" required min="0" step="0.01">
                      <label for="price">Monthly Rent ($) *</label>
                    </div>
                    
                    <div class="input-field col s6 m3">
                      <i class="material-icons prefix">hotel</i>
                      <input type="number" id="bedrooms" name="bedrooms" class="validate" required min="0">
                      <label for="bedrooms">Beds *</label>
                    </div>
                    
                    <div class="input-field col s6 m3">
                      <i class="material-icons prefix">bathtub</i>
                      <input type="number" id="bathrooms" name="bathrooms" class="validate" required min="0" step="0.5">
                      <label for="bathrooms">Baths *</label>
                    </div>
                    
                    <div class="input-field col s12">
                      <i class="material-icons prefix">description</i>
                      <textarea id="description" name="description" class="materialize-textarea" required maxlength="120"></textarea>
                      <label for="description">Description *</label>
                      <span class="helper-text">Maximum 120 characters</span>
                    </div>
                  </div>
                </div>
                
                <!-- Location Section -->
                <div class="section">
                  <h5 class="blue-grey-text text-darken-1" style="font-size: 18px; margin: 20px 0 10px 0; display: flex; align-items: center;">
                    <i class="material-icons" style="margin-right: 8px;">place</i>Location
                  </h5>
                  <div class="divider" style="margin-bottom: 15px;"></div>
                  
                  <div class="row" style="margin-bottom: 0;">
                    <div class="input-field col s12">
                      <i class="material-icons prefix">home</i>
                      <input type="text" id="address" name="address" class="validate" required>
                      <label for="address">Street Address *</label>
                    </div>
                    
                    <div class="input-field col s12">
                      <i class="material-icons prefix">location_city</i>
                      <input type="text" id="city" name="city" class="validate" required>
                      <label for="city">City *</label>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Right Column -->
              <div class="col s12 m6">
                <!-- Image Upload Section -->
                <div class="section">
                  <h5 class="blue-grey-text text-darken-1" style="font-size: 18px; margin: 20px 0 10px 0; display: flex; align-items: center;">
                    <i class="material-icons" style="margin-right: 8px;">image</i>Property Image
                  </h5>
                  <div class="divider" style="margin-bottom: 15px;"></div>
                  
                  <div class="file-field input-field">
                    <div class="btn blue-grey darken-1 waves-effect">
                      <span><i class="material-icons left">file_upload</i>Upload</span>
                      <input type="file" id="propertyImage" name="image" accept="image/*" title="Select property image">
                    </div>
                    <div class="file-path-wrapper">
                      <input class="file-path validate" type="text" placeholder="Upload property image">
                    </div>
                  </div>
                  
                  <div class="card-panel grey lighten-4" style="margin-top: 10px; text-align: center; padding: 20px;">
                    <i class="material-icons medium grey-text">photo_size_select_actual</i>
                    <p class="grey-text">Image preview will appear here</p>
                    <p class="grey-text text-darken-1" style="font-size: 0.85rem;">
                      Recommended: 1200 x 800 pixels, JPEG or PNG format
                    </p>
                  </div>
                </div>
                
                <!-- Amenities Section -->
                <div class="section">
                  <h5 class="blue-grey-text text-darken-1" style="font-size: 18px; margin: 20px 0 10px 0; display: flex; align-items: center;">
                    <i class="material-icons" style="margin-right: 8px;">hotel</i>Amenities
                  </h5>
                  <div class="divider" style="margin-bottom: 15px;"></div>
                  
                  <p class="grey-text" style="margin-bottom: 15px;">Select all that apply:</p>
                  
                  <div class="row" style="margin-left: -10px; margin-right: -10px;">
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="1">
                        <span>Air Conditioning</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="2">
                        <span>Heating</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="3">
                        <span>Washer/Dryer</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="4">
                        <span>Dishwasher</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="5">
                        <span>Parking</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="6">
                        <span>Gym</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="7">
                        <span>Pool</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="8">
                        <span>Balcony</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="9">
                        <span>Pets Allowed</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="10">
                        <span>Furnished</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="11">
                        <span>Wi-Fi</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="12">
                        <span>Cable TV</span>
                      </label>
                    </div>
                    
                    <div class="col s6 m4 l4" style="padding: 5px 10px;">
                      <label class="amenity-label" style="display: block; padding: 8px 10px; border-radius: 4px; background-color: #f5f5f5;">
                        <input type="checkbox" class="filled-in" name="amenities" value="13">
                        <span>Security System</span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
      </div>
            
            <!-- Submit Button -->
            <div class="card-action" style="background-color: #f9f9f9; border-radius: 0 0 8px 8px; padding: 20px; margin: 20px -20px -20px -20px;">
              <div class="row" style="margin-bottom: 0;">
                <div class="col s12 right-align">
                  <a href="{{ url_for('index_views.get_listing_page') }}" class="btn-flat waves-effect">Cancel</a>
                  <button type="submit" class="btn-large waves-effect waves-light blue-grey darken-1" style="margin-left: 10px;">
                    <i class="material-icons left">add_circle</i>Add Property
                  </button>
      </div>
      </div>
      </div>
          </form>
      </div>
      </div>
      </div>
      </div>
      </div>

<style>
  /* Customize checkboxes to match blue-grey theme */
  [type="checkbox"].filled-in:checked+span:not(.lever):after {
    border: 2px solid #607d8b;
    background-color: #607d8b;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Preview uploaded image
    document.getElementById('propertyImage').onchange = function(e) {
      var preview = document.querySelector('.card-panel');
      if (this.files && this.files[0]) {
        var reader = new FileReader();
        reader.onload = function(e) {
          preview.innerHTML = '<img src="' + e.target.result + '" style="max-width: 100%; max-height: 200px;">';
        };
        reader.readAsDataURL(this.files[0]);
      }
    };
  });
</script>

    {% endblock %}
